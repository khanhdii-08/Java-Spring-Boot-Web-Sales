<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{layout/main}">

<head>
    <title>Quản lý sản phẩm</title>
    <link rel="stylesheet" th:href="@{/css/product-management.css}">
</head>

<body>
    <div layout:fragment="content" class="container">
        <h1 class="text-center text-danger">Danh sách các sản phẩm</h1>
        <hr>
        <div class="list-product">
            <div class=" d-flex justify-content-end"><button class="btn btn-success">Thêm<i class="ms-2 bi bi-plus-circle-fill"></i></button></div>
            <div id="product" class="product p-2 d-flex" data-bs-toggle="modal"
            data-bs-target="#addProduct">

                <div class="wrap-image">
                    <img class="product-image" alt="hình ảnh sản phẩm" th:src="@{/image/default-image.jpg}">
                    </img>
                </div>
                <div class="product-infor ps-5 flex-grow-1 flex-shrink-1 d-flex flex-column justify-content-center">
                    <div class="product-infor__name">
                        <h5 class="product-name">tên sản phẩm</h5>
                    </div>
                    <div class="product-infor__price d-flex">
                        <p class="">Giá :</p>
                        <p class="product-price text-danger">giá sản phẩm</p>
                    </div>

                </div>
                <div class="product-update position-relative">
                    <div class="d-flex flex-column align-items-center justify-content-center h-100">
                        <button id="btnDelete" class="position-absolute">&times</button>
                        <div class="product-update__action d-flex align-content-center">
                            <button class="btn btn-success product-update__increase">+</button>
                            <input type="number" value="1" min="1" max="500" step="1"
                                id="product-update__input-quantity">
                            <button class="btn btn-danger product-update__decrease">-</button>
                        </div>
                        <div class="mt-3">
                            <span>Số lượng tồn: </span> <span class="product-update__quantity ">20</span>
                        </div>
                    </div>
                </div>
            </div>


            
        </div>
        <script>

            
            
            var products = document.querySelectorAll(".product");


            var productActionHandler = function (e) {
                var btnIncrease = e.querySelector(".product-update__increase");
                var btnDecrease = e.querySelector(".product-update__decrease");
                var quantity = e.querySelector("#product-update__input-quantity");
                var btnDelete = e.querySelector("#btnDelete");
                btnDelete.onclick = function (e) {
                    console.log("delete");

                }

                quantity.onchange = (e) => {
                    if (e.target.value == 0) {
                        quantity.value = 1;
                    }
                }
                btnIncrease.onclick = function () {
                    quantity.value++;
                }
                btnDecrease.onclick = function () {
                    count = quantity.value;
                    if (count == 1)
                        quantity.value = 1;
                    else
                        quantity.value--;
                }
            }
            products.forEach(product => {

                productActionHandler(product);
            })


        </script>
    </div>

</body>

</html>